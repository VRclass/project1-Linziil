#N canvas 308 124 803 723 10;
#X obj 214 160 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X floatatom 355 176 5 0 0 0 - - -, f 5;
#N canvas 285 555 292 294 mstobpm 0;
#X obj 45 13 inlet;
#X obj 46 145 timer;
#X obj 47 238 outlet;
#X obj 46 172 expr 60000 / $f1;
#X obj 46 108 t b b;
#X obj 45 78 sel 0;
#X text 97 55 time 16th notes;
#X obj 43 45 % 24;
#X obj 48 206 / 1;
#X connect 0 0 7 0;
#X connect 1 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 1 0;
#X connect 4 1 1 1;
#X connect 5 0 4 0;
#X connect 7 0 5 0;
#X connect 8 0 2 0;
#X restore 97 596 pd mstobpm;
#X floatatom 97 635 5 0 0 0 - - -, f 5;
#N canvas 947 274 174 209 dialinbpm 0;
#X obj 29 41 inlet;
#X obj 29 72 expr 1000/($f1/60);
#X floatatom 29 121 5 0 0 0 - - -, f 5;
#X obj 29 96 / 24;
#X obj 30 150 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X restore 298 223 pd dialinbpm;
#X obj 214 124 inlet;
#X obj 355 111 inlet;
#X obj 305 663 spigot 1;
#X obj 355 142 i;
#X obj 261 727 s bpm;
#X obj 335 754 outlet;
#N canvas 239 342 450 300 triplets 0;
#X obj 73 41 inlet;
#X obj 58 168 outlet;
#X obj 76 86 sel 0 8 16;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X restore 361 378 pd triplets;
#N canvas 597 143 450 300 sixteenths 0;
#X obj 73 41 inlet;
#X obj 58 168 outlet;
#X obj 76 86 sel 0 6 12 18;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X connect 2 2 1 0;
#X connect 2 3 1 0;
#X restore 457 379 pd sixteenths;
#X obj 361 405 s triplets;
#X obj 457 406 s sixteenths;
#X obj 119 409 s quarters;
#X obj 239 408 s eighths;
#X text 32 504 if getting clock from MIDI \, measure the BPM;
#N canvas 236 394 450 300 quarters 0;
#X obj 73 41 inlet;
#X obj 73 75 sel 0;
#X obj 73 111 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 119 379 pd quarters;
#N canvas 668 208 450 300 eighths 0;
#X obj 73 41 inlet;
#X obj 75 120 outlet;
#X obj 76 86 sel 0 12;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X connect 2 1 1 0;
#X restore 239 379 pd eighths;
#X obj 499 340 s 24ppq;
#X obj 562 631 r 24ppq;
#X msg 562 659 248;
#X obj 563 708 midiout;
#X text 183 7 a MIDI enabled master metronome;
#X text 411 761 separate BPM midi and internal for display purposes
;
#X text 528 596 send ticks out as midiclock;
#X text 410 111 bpm input;
#X text 566 387 add other beat div calculations here ..., f 23;
#X text 184 27 start stop in left \, BPM in right. The BPM input is
ignored in presence of MIDI clock. The mainmetro sub patch switches
automatically between MIDI clock and 24 pulses per quarter note internal
clock. The resultant pulses are sent out as MIDI clock to sync downstream
gear.;
#N canvas 0 22 450 300 32nds 0;
#X obj 102 136 sel 0 3 6 9 12 15 18 21;
#X obj 102 109 inlet;
#X obj 102 196 outlet;
#X connect 0 0 2 0;
#X connect 0 1 2 0;
#X connect 0 2 2 0;
#X connect 0 3 2 0;
#X connect 0 4 2 0;
#X connect 0 5 2 0;
#X connect 0 6 2 0;
#X connect 0 7 2 0;
#X connect 1 0 0 0;
#X restore 608 332 pd 32nds;
#X obj 608 352 s 32nds;
#N canvas 608 45 902 691 mainmetro 0;
#X obj 254 49 inlet;
#X obj 443 49 inlet;
#X obj 280 156 metro 50;
#X obj 389 438 + 1, f 5;
#X obj 280 462 f;
#X floatatom 280 581 5 0 0 0 - - -, f 5;
#X obj 280 607 outlet;
#X msg 565 496 0;
#X obj 350 484 >= 23;
#X obj 350 516 sel 1;
#X text 67 12 autoswitch between internal and MIDI clock;
#X obj 266 90 t f b;
#X text 28 87 reset back to 0 when it starts;
#X text 356 587 24 pulses per quarter note output;
#X text 503 50 metro speed in ms;
#X text 298 48 start stop;
#X connect 0 0 11 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 5 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 7 0 4 1;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 11 0 2 0;
#X connect 11 1 7 0;
#X restore 223 258 pd mainmetro;
#X connect 0 0 32 0;
#X connect 1 0 4 0;
#X connect 1 0 7 0;
#X connect 2 0 3 0;
#X connect 4 0 32 1;
#X connect 5 0 0 0;
#X connect 6 0 8 0;
#X connect 7 0 9 0;
#X connect 7 0 10 0;
#X connect 8 0 1 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 18 0 15 0;
#X connect 19 0 16 0;
#X connect 21 0 22 0;
#X connect 30 0 31 0;
#X connect 32 0 18 0;
#X connect 32 0 19 0;
#X connect 32 0 11 0;
#X connect 32 0 12 0;
#X connect 32 0 20 0;
#X connect 32 0 30 0;
